# $OpenLDAP$

UNIX_PRGS = rcpt500
PROGRAMS = $(@PLAT@_PRGS)

SRCS= main.c cmds.c help.c query.c
XSRCS= version.c
OBJS= main.o cmds.o help.o query.o
HDRS= rcpt500.h

LDAP_INCDIR= ../../include       
LDAP_LIBDIR= ../../libraries

XLIBS =  -lldap -llber -llutil
XXLIBS	= $(SECURITY_LIBS) $(LUTIL_LIBS)

rcpt500 : version.o
	$(LTLINK) -o $@ version.o $(OBJS) $(LIBS)

version.c: ${OBJS} $(LDAP_LIBDEPEND)
	@-$(RM) $@
	$(MKVERSION) rcpt500 > $@

install-local: $(PROGRAMS) rcpt500.help FORCE
	-$(MKDIR) $(DESTDIR)$(libexecdir) $(DESTDIR)$(datadir)
	@(								\
	    for prg in $(PROGRAMS); do					\
		$(LTINSTALL) $(INSTALLFLAGS) -s -m 755 $$prg$(EXEEXT)	\
		    $(DESTDIR)$(libexecdir);				\
	    done							\
	)
	-$(MV) $(DESTDIR)$(datadir)/rcpt500.help $(DESTDIR)$(datadir)/rcpt500.help-
	$(INSTALL) $(INSTALLFLAGS) -m 644 $(srcdir)/rcpt500.help $(DESTDIR)$(datadir)

