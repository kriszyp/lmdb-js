.TH SLURPD 8C "RELEASEDATE" "OpenLDAP LDVERSION"
.\" $OpenLDAP$
.\" Copyright 1998-2008 The OpenLDAP Foundation All Rights Reserved.
.\" Copying restrictions apply.  See COPYRIGHT/LICENSE.
.SH NAME
slurpd \- Standalone LDAP Update Replication Daemon
.SH SYNOPSIS
.B LIBEXECDIR/slurpd [\-d debug\-level]
.B [\-f slapd\-config\-file] [\-r slapd\-replog\-file]
.B [\-t temp\-dir] [\-o]
.B 
.SH DESCRIPTION
.LP
.B Slurpd
is used to propagate changes from one slapd database to another.  If
slapd is configured to produce a replication log, 
.B slurpd
reads that
replication log and sends the changes to the slave 
.B slapd
instances
via the LDAP protocol.
.B slurpd
is typically invoked at boot time, usually out of
.BR  /etc/rc.local .
.LP
Upon startup,
.B slurpd
normally forks and disassociates itself from the invoking tty,
then reads the replication log (given either by the
.I replogfile
directive in the 
.B slapd
config file, or by the
.RB \- r
command-line option).
If the replication log file does not exist or is empty,
.B slurpd
goes to sleep.  It periodically wakes up and checks to see if there
are any changes to be propagated.
.LP
When
.B slurpd
notices that there are changes to propagate to slave 
.B slapd
instances, it locks the replication log, makes its own private copy,
releases the lock, and forks one copy of itself for each replica
.B slapd
to be updated.  Each child process binds to the slave 
.B slapd
as the
DN given by the
.I binddn
option to the
.I replica
directive in the
.B slapd
config file, and sends the changes.
.LP
See
.BR slapd (8)
for details on the standalone LDAP daemon.
.LP
Note that slurpd reads
.B replication
directive from
.BR slapd.conf (5),
but uses
.BR ldap.conf (5)
to obtain other configuration settings (such as TLS settings).
.SH OPTIONS
.TP
.BI \-d " debug\-level"
Turn on debugging as defined by
.I debug\-level.
If this option is specified, even with a zero argument,
.B slurpd
will not fork or disassociate from the invoking terminal.  Some general
operation and status messages are printed for any value of \fIdebug\-level\fP.
\fIdebug\-level\fP is taken as a bit string, with each bit corresponding to a
different kind of debugging information.  See <ldap.h> for details.
.TP
.BI \-f " slapd\-config\-file"
Specifies the slapd configuration file.  The default is
.BR ETCDIR/slapd.conf .
.TP
.BI \-r " slapd\-replog\-file"
Specifies the name of the 
.B slapd
replication logfile.  Normally, the name
of the replication log file is read from the 
.B slapd
configuration file.  The file should be located in a directory
with limited read/write/execute access.
The
.B \-r
option allows you to override this.  In conjunction with the
.B \-o
option, you can process a replication log file in a "one\-shot" mode.  For
example, if 
.B slurpd
has encountered errors in processing a replication log,
you can run it in one\-shot mode and give the rejection file name as
the argument to the \-r option, once you've resolved the problem which caused
the replication to fail.
.TP
.B \-o
Run in "one\-shot" mode.  Normally, 
.B slurpd
processes the replog file
and then watches for more replication entries to be appended.  In
one\-shot mode, 
.B slurpd
processes a replication log and exits.
.TP
.BI \-t " temp\-dir"
.B slurpd
copies the replication log to a working directory before processing it.
The directory permissions should limit read/write/execute access as
temporary files may contain sensitive information.
This option allows you to specify the location of these temporary files. 
The default is
.BR LOCALSTATEDIR/openldap-slurp .
.SH EXAMPLES
To start 
.I slurpd
and have it fork and detach from the terminal and process
the replication logs generated by
.I slapd,
just type:
.LP
.nf
.ft tt
	LIBEXECDIR/slurpd
.ft
.fi
.LP
To start 
.I slurpd
with an alternate 
.I slapd
configuration file, and turn
on voluminous debugging which will be printed on standard error, type:
.LP
.nf
.ft tt
	LIBEXECDIR/slurpd -f ETCDIR/slapd.conf -d 255
.ft
.fi
.LP
.SH "SEE ALSO"
.BR ldap (3),
.BR ldap.conf (5),
.BR slapd.conf (5),
.BR slapd.replog (5),
.BR slapd (8)
.LP
"OpenLDAP Administrator's Guide" (http://www.OpenLDAP.org/doc/admin/)
.SH ACKNOWLEDGEMENTS
.B OpenLDAP
is developed and maintained by The OpenLDAP Project (http://www.openldap.org/).
.B OpenLDAP
is derived from University of Michigan LDAP 3.3 Release.  
